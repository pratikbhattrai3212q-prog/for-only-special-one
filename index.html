<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you be mine?</title>
  <style>
    :root{
      --bg:#0f172a; --text:#f8fbff; --accent:#ff6b6b; --accent-2:#7c5cff;
      --glass: rgba(255,255,255,0.04);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      background: radial-gradient(1200px 600px at 10% 20%, rgba(124,92,255,0.08), transparent),
                  radial-gradient(800px 400px at 90% 80%, rgba(255,107,107,0.06), transparent),
                  var(--bg);
      color:var(--text);display:grid;place-items:center;padding:28px;
      -webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;
    }

    .card{
      width:min(980px,96%);background:linear-gradient(180deg,var(--glass), rgba(255,255,255,0.02));
      border-radius:16px;padding:28px;box-shadow:0 12px 40px rgba(2,6,23,0.6);backdrop-filter: blur(8px);
      position:relative;overflow:hidden;border:1px solid rgba(255,255,255,0.03);
      display:grid;grid-template-columns:1fr 340px;gap:20px;align-items:center;
    }

    .left h1{margin:0 0 6px;font-size:2.1rem}
    .left p{margin:0 0 16px;opacity:0.95}
    .preview{
      height:220px;border-radius:12px;display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:1.25rem;
      background:linear-gradient(135deg,var(--accent),var(--accent-2));box-shadow:0 12px 30px rgba(124,92,255,0.16);
    }

    .controls{display:flex;gap:12px;flex-wrap:wrap}
    .btn{appearance:none;border:0;padding:12px 18px;border-radius:12px;font-weight:700;cursor:pointer;min-width:140px}
    .btn-primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white}
    .btn-soft{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}

    /* right panel */
    .right{display:flex;flex-direction:column;gap:12px;align-items:center}
    .note{font-size:0.92rem;opacity:0.95;text-align:center}

    /* surprise overlay */
    .overlay{position:fixed;inset:0;display:grid;place-items:center;background:rgba(3,6,23,0.65);z-index:60;opacity:0;pointer-events:none;transition:opacity .35s}
    .overlay.show{opacity:1;pointer-events:auto}
    .modal{width:min(720px,94%);background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));padding:28px;border-radius:14px;border:1px solid rgba(255,255,255,0.04);text-align:center}
    .modal h2{margin:0 0 8px;font-size:1.8rem}
    .modal p{margin:0 0 18px}

    /* hearts */
    .hearts{position:absolute;left:10px;top:10px;opacity:0.14}
    .hearts svg{width:260px;height:260px}

    /* big celebration */
    .celebrate{position:fixed;inset:0;display:grid;place-items:center;z-index:70;pointer-events:none;opacity:0;transition:opacity .4s}
    .celebrate.show{opacity:1}
    .bigmsg{font-size:2.4rem;font-weight:800;text-align:center}

    /* simple confetti */
    .confetti-piece{position:fixed;width:12px;height:16px;opacity:0;transform:translateY(-50vh) rotate(0deg);will-change:transform,opacity}

    footer{position:relative;margin-top:6px;font-size:0.85rem;opacity:0.9}

    @media (max-width:820px){.card{grid-template-columns:1fr;}.preview{height:180px}}
  </style>
</head>
<body>
  <div class="card" role="main">
    <div class="left">
      <div class="hearts" aria-hidden>
        <!-- decorative hearts -->
        <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 28s-12-7.2-12-14.8C4 7.2 8.2 4 12 6c1.8 1 2.8 4.2 4 4.2s2.2-3.2 4-4.2c3.8-2 8 1.2 8 7.2C28 20.8 16 28 16 28z" fill="white"/>
        </svg>
      </div>

      <h1>Hey ‚Äî I made something for you</h1>
      <p class="lead">A little surprise page, just for you. Click the button on the right when you're ready ‚Äî it's short and sweet.</p>

      <div class="preview" id="preview">Open the surprise and see ‚ú®</div>

      <footer>
        Tip: Use full-screen for more magic.
      </footer>
    </div>

    <div class="right">
      <div class="note">When you're ready, press the red button. Be brave ‚Äî be cute.</div>
      <div class="controls">
        <button class="btn btn-primary" id="openBtn">Open Surprise</button>
        <button class="btn btn-soft" id="shareBtn">Edit message</button>
      </div>

      <small style="opacity:0.85">Made with ‚ù§Ô∏è</small>
    </div>
  </div>

  <!-- overlay modal -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" id="modal">
      <h2>Just between us...</h2>
      <p id="proposalText">I really like you. Would you be my girlfriend?</p>

      <div style="display:flex;gap:12px;justify-content:center;margin-top:18px">
        <button class="btn btn-primary" id="yesBtn">Yes üíñ</button>
        <button class="btn btn-soft" id="noBtn">I need time</button>
      </div>

      <div style="margin-top:14px">
        <button class="btn" id="editMsgBtn">Change text</button>
      </div>
    </div>
  </div>

  <!-- celebration layer -->
  <div class="celebrate" id="celebrate" aria-hidden>
    <div>
      <div class="bigmsg" id="bigmsg">YAY! üíû</div>
      <div style="text-align:center;margin-top:10px">I'm so happy ‚Äî let's make memories together.</div>
    </div>
  </div>

  <script>
    const overlay = document.getElementById('overlay');
    const openBtn = document.getElementById('openBtn');
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const celebrate = document.getElementById('celebrate');
    const proposalText = document.getElementById('proposalText');
    const editMsgBtn = document.getElementById('editMsgBtn');
    const shareBtn = document.getElementById('shareBtn');
    const preview = document.getElementById('preview');
    const bigmsg = document.getElementById('bigmsg');

    openBtn.addEventListener('click', ()=>{
      overlay.classList.add('show');
      overlay.setAttribute('aria-hidden','false');
    });

    noBtn.addEventListener('click', ()=>{
      overlay.classList.remove('show');
      overlay.setAttribute('aria-hidden','true');
      preview.innerText = 'No worries ‚Äî take your time. :)';
    });

    yesBtn.addEventListener('click', ()=>{
      overlay.classList.remove('show');
      overlay.setAttribute('aria-hidden','true');
      triggerCelebrate();
    });

    editMsgBtn.addEventListener('click', ()=>{
      const newText = prompt('Edit the proposal text:', proposalText.innerText);
      if(newText!==null){
        proposalText.innerText = newText.trim() || proposalText.innerText;
        preview.innerText = proposalText.innerText;
      }
    });

    shareBtn.addEventListener('click', ()=>{ editMsgBtn.click(); });

    // celebration: change background and spawn confetti
    function triggerCelebrate(){
      // change background to brighter
      document.body.style.background = 'linear-gradient(135deg, #ffd1dc 0%, #ffe6d6 100%)';
      document.body.style.color = '#111';
      celebrate.classList.add('show');
      bigmsg.innerText = proposalText.innerText.includes('?') ? 'She said yes! üéâ' : 'They said yes! üéâ';

      // spawn confetti pieces
      for(let i=0;i<80;i++){
        spawnConfetti();
      }

      // small pulse on preview
      preview.animate([
        {transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}
      ],{duration:900,iterations:2});
    }

    function spawnConfetti(){
      const el = document.createElement('div');
      el.className = 'confetti-piece';
      el.style.left = (Math.random()*100) + 'vw';
      el.style.top = '-10vh';
      el.style.background = getRandomColor();
      el.style.opacity = 1;
      document.body.appendChild(el);

      const endY = (window.innerHeight + 40) + Math.random()*200;
      const rotate = (Math.random()*360);
      const duration = 1800 + Math.random()*1600;

      el.animate([
        {transform: `translateY(-50vh) rotate(${rotate}deg)`, opacity:1},
        {transform: `translateY(${endY}px) rotate(${rotate+360}deg)`, opacity:0.85}
      ],{duration:duration,easing:'cubic-bezier(.2,.6,.2,1)'});

      setTimeout(()=> el.remove(), duration+100);
    }

    function getRandomColor(){
      const palette = ['#ff6b6b','#7c5cff','#ffd166','#06d6a0','#4cc9f0','#ff9f1c'];
      return palette[Math.floor(Math.random()*palette.length)];
    }

    // keyboard escape closes modal
    window.addEventListener('keydown', e=>{ if(e.key==='Escape') overlay.classList.remove('show'); });

    // accessibility: click outside modal closes
    overlay.addEventListener('click', (e)=>{ if(e.target===overlay) overlay.classList.remove('show'); });

    // preload a gentle chime using WebAudio (no external files)
    function playChime(){
      try{
        const ctx = new (window.AudioContext||window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type='sine';o.frequency.value=880;g.gain.value=0.02; o.connect(g);g.connect(ctx.destination);
        o.start(); o.frequency.exponentialRampToValueAtTime(440, ctx.currentTime + 0.4);
        g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.9);
        setTimeout(()=>{ o.stop(); ctx.close(); },1100);
      }catch(e){/* ignore */}
    }

    yesBtn.addEventListener('click', playChime);
  </script>
</body>
</html>
